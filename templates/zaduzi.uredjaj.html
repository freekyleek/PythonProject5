{% extends 'base.html' %}
{% block title %}Zaduži uređaj{% endblock %}
{% block content %}
<h1>Zaduži uređaj</h1>
<form method="post" class="frm">
  <label for="tehnicar">Zaduži na<span class="req">*</span></label>
  <select id="tehnicar" name="tehnicar" required>
    <option value="">-- Odaberite --</option>

    {% if podrska_ops and podrska_ops|length %}
    <optgroup label="Podrška">
      {% for p in podrska_ops %}
        {% set valp = p.username or p.user or p.email or p.name %}
        {% set txtp = (p.name or p.full_name or p.username or p.email or valp) ~ ' (Podrška)' %}
        <option value="{{ valp }}">{{ txtp }}</option>
      {% endfor %}
    </optgroup>
    {% endif %}

    {% if tehnicari and tehnicari|length %}
    <optgroup label="Tehničar">
      {% for t in tehnicari %}
        {% set val = t.username or t.user or t.email or t.name %}
        {% set txt = t.name or t.full_name or t.username or t.email or val %}
        <option value="{{ val }}">{{ txt }}</option>
      {% endfor %}
    </optgroup>
    {% endif %}
  </select>

  <label for="uredjaj">Uređaj<span class="req">*</span></label>
  <select id="uredjaj" name="uredjaj" required>
    <option value="">-- Odaberite --</option>
    {% for u in uredjaji %}
      <option value="{{ u.serijski }}">{{ u.model }} — {{ u.serijski }}</option>
    {% endfor %}
  </select>

  <div class="actions">
    <button type="submit" class="btn">Spremi</button>
    <a class="btn secondary" href="{{ url_for('uredjaji') }}">Natrag</a>
  </div>
</form>
<style>
.frm{ display:grid; gap:12px; max-width:520px;}
.req{ color:#ffd; margin-left:4px;}
.btn{ display:inline-block; padding:8px 14px; border-radius:8px; background:#198754; color:#fff; text-decoration:none; border:none; cursor:pointer; }
.btn.secondary{ background:#6c757d; }
select{ padding:8px; border-radius:6px; border:1px solid rgba(255,255,255,.3); background:rgba(0,0,0,.15); color:#fff; }
</style>
{% endblock %}
